<!DOCTYPE html>
<html lang="en">

<head>
    <title>‡§õ‡§æ‡§Ø‡§æ‡§ö‡§ø‡§§‡•ç‡§∞ ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet">
    <link rel="shortcut icon" href="images/fevicon.png" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <a href="#main-content" class="visually-hidden-focusable">Skip to main content</a>

    <nav id="mainNavbar" class="navbar navbar-expand-lg navbar-dark fixed-top" style="background: var(--primary-color)">
        <div class="container">
            <a class="navbar-brand fw-bold" href="index.html"><img class="logo" style="margin-right: 5px;"
                    src="images/logo.png" alt="Special Children School Logo">‡§Æ‡•Ç‡§ï‡§¨‡§ß‡§ø‡§∞ ‡§®‡§ø‡§µ‡§æ‡§∏‡•Ä ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§≤‡§Ø</a>
            <button class="navbar-toggler" aria-label="Toggle navigation" data-bs-toggle="collapse"
                data-bs-target="#menu">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="menu">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">‡§Æ‡•Å‡§ñ‡§™‡•É‡§∑‡•ç‡§†</a></li>
                    <li class="nav-item"><a class="nav-link" href="about.html">‡§Ü‡§Æ‡§ö‡•ç‡§Ø‡§æ‡§¨‡§¶‡•ç‡§¶‡§≤</a></li>
                    <li class="nav-item"><a class="nav-link" href="programs.html">‡§Ü‡§Æ‡§ö‡•á ‡§â‡§™‡§ï‡•ç‡§∞‡§Æ</a></li>
                    <li class="nav-item"><a class="nav-link" href="gallery.html">‡§õ‡§æ‡§Ø‡§æ‡§ö‡§ø‡§§‡•ç‡§∞ ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π</a></li>
                    <li class="nav-item"><a class="nav-link" href="donation.html">‡§¶‡•á‡§£‡§ó‡•Ä</a></li>
                    <li class="nav-item"><a class="nav-link" href="contact.html">‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <main id="main-content">

        <section class="section">
            <div class="container d-flex flex-column align-items-center">
                <div class="container d-flex flex-column align-items-center mb-7">
                    <h1 class="mb-4" data-aos="fade-up" data-aos-delay="100">‡§õ‡§æ‡§Ø‡§æ‡§ö‡§ø‡§§‡•ç‡§∞ ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π</h1>
                    <h3 class="mb-4" data-aos="fade-up" data-aos-delay="200">‡§Ü‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§∂‡§æ‡§≥‡•á‡§§‡•Ä‡§≤ ‡§¶‡•à‡§®‡§Ç‡§¶‡§ø‡§® ‡§â‡§™‡§ï‡•ç‡§∞‡§Æ, ‡§∂‡§ø‡§ï‡•ç‡§∑‡§£
                        ‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§Ü‡§£‡§ø ‡§µ‡§ø‡§µ‡§ø‡§ß ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ö‡•á ‡§ï‡§æ‡§π‡•Ä ‡§ï‡•ç‡§∑‡§£
                        ‡§Ø‡•á‡§•‡•á ‡§™‡§æ‡§π‡§æ‡§Ø‡§≤‡§æ
                        ‡§Æ‡§ø‡§≥‡§§‡§æ‡§§.</h3>
                </div>
                <div class="row g-4 mt-4 gallery-grid" aria-live="polite">
                    <div class="col-6 col-md-4" data-aos="fade-up" data-aos-delay="400">
                        <figure class="gallery-item" tabindex="0" data-index="0">
                            <img src="images/dd1.jpg" class="gallery-img" loading="lazy"
                                alt="‡§Æ‡•Ç‡§ï ‡§µ ‡§¨‡§ß‡§ø‡§∞ ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•ç‡§Ø‡§æ‡§Ç‡§∏‡•ã‡§¨‡§§ ‡§∂‡§ø‡§ï‡•ç‡§∑‡§ï ‡§µ ‡§™‡§æ‡§≤‡§ï‡§æ‡§Ç‡§ö‡§æ ‡§∏‡§π‡§≠‡§æ‡§ó ‡§Ö‡§∏‡§≤‡•á‡§≤‡§æ ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ">
                        </figure>
                    </div>
                    <div class="col-6 col-md-4" data-aos="fade-up" data-aos-delay="550">
                        <figure class="gallery-item" tabindex="0" data-index="1">
                            <img src="images/dd2.jpg" class="gallery-img" loading="lazy"
                                alt="‡§Æ‡•Å‡§ï‡§¨‡§ß‡§ø‡§∞ ‡§®‡§ø‡§µ‡§æ‡§∏‡•Ä ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§≤‡§Ø, ‡§Ö‡§ï‡•ã‡§≤‡§æ ‡§Ø‡•á‡§•‡•Ä‡§≤ ‡§∂‡§æ‡§≥‡•á‡§ö‡•ç‡§Ø‡§æ ‡§™‡•ç‡§∞‡§µ‡•á‡§∂‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ‡§µ‡§∞ ‡§Ü‡§Ø‡•ã‡§ú‡§ø‡§§ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ‡§æ‡§ö‡§æ ‡§ï‡•ç‡§∑‡§£">
                        </figure>
                    </div>
                    <div class="col-6 col-md-4" data-aos="fade-up" data-aos-delay="700">
                        <figure class="gallery-item" tabindex="0" data-index="2">
                            <img src="images/dd3.jpg" class="gallery-img" loading="lazy"
                                alt="‡§Æ‡§æ‡§®‡•ç‡§Ø‡§µ‡§∞ ‡§™‡§æ‡§π‡•Å‡§£‡•á, ‡§∂‡§ø‡§ï‡•ç‡§∑‡§ï ‡§Ü‡§£‡§ø ‡§Æ‡•Ç‡§ï ‡§µ ‡§¨‡§ß‡§ø‡§∞ ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•Ä ‡§Ø‡§æ‡§Ç‡§®‡•Ä ‡§è‡§ï‡§§‡•ç‡§∞ ‡§∏‡§æ‡§ú‡§∞‡§æ ‡§ï‡•á‡§≤‡•á‡§≤‡§æ ‡§∞‡§ï‡•ç‡§∑‡§æ‡§¨‡§Ç‡§ß‡§® ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ">
                        </figure>
                    </div>
                    <div class="col-6 col-md-4" data-aos="fade-up" data-aos-delay="400">
                        <figure class="gallery-item" tabindex="0" data-index="3">
                            <img src="images/dd4.jpg" class="gallery-img" loading="lazy"
                                alt="‡§∂‡§æ‡§≥‡•á‡§§ ‡§Ü‡§Ø‡•ã‡§ú‡§ø‡§§ ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§â‡§™‡§ï‡•ç‡§∞‡§Æ‡§æ‡§§ ‡§Ü‡§®‡§Ç‡§¶‡§æ‡§®‡•á ‡§∏‡§π‡§≠‡§æ‡§ó‡•Ä ‡§ù‡§æ‡§≤‡•á‡§≤‡•á ‡§Æ‡•Ç‡§ï ‡§µ ‡§¨‡§ß‡§ø‡§∞ ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•Ä">
                        </figure>
                    </div>
                    <div class="col-6 col-md-4" data-aos="fade-up" data-aos-delay="400">
                        <figure class="gallery-item" tabindex="0" data-index="4">
                            <img src="images/dd5.jpg" class="gallery-img" loading="lazy"
                                alt="‡§∂‡§æ‡§≥‡•á‡§§‡•Ä‡§≤ ‡§¶‡•à‡§®‡§Ç‡§¶‡§ø‡§® ‡§â‡§™‡§ï‡•ç‡§∞‡§Æ ‡§Ü‡§£‡§ø ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•ç‡§Ø‡§æ‡§Ç‡§ö‡•ç‡§Ø‡§æ ‡§∏‡§π‡§≠‡§æ‡§ó‡§æ‡§ö‡•á ‡§µ‡§ø‡§µ‡§ø‡§ß ‡§ï‡•ç‡§∑‡§£">
                        </figure>
                    </div>
                    <div class="col-6 col-md-4" data-aos="fade-up" data-aos-delay="400">
                        <figure class="gallery-item" tabindex="0" data-index="5">
                            <img src="images/dd6.jpg" class="gallery-img" loading="lazy"
                                alt="‡§ú‡§ø‡§≤‡•ç‡§π‡§æ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§® ‡§∏‡§Æ‡§ø‡§§‡•Ä‡§ö‡•ç‡§Ø‡§æ ‡§≠‡•á‡§ü‡•Ä‡§¶‡§∞‡§Æ‡•ç‡§Ø‡§æ‡§® ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•ç‡§Ø‡§æ‡§Ç‡§∂‡•Ä ‡§∏‡§Ç‡§µ‡§æ‡§¶ ‡§∏‡§æ‡§ß‡§§‡§æ‡§®‡§æ ‡§Æ‡§æ‡§®‡•ç‡§Ø‡§µ‡§∞ ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞‡•Ä">
                        </figure>
                    </div>
                    <div class="col-6 col-md-4" data-aos="fade-up" data-aos-delay="400">
                        <figure class="gallery-item" tabindex="0" data-index="6">
                            <img src="images/dd7.jpg" class="gallery-img" loading="lazy"
                                alt="‡§∂‡§æ‡§≥‡•á‡§§ ‡§Ü‡§Ø‡•ã‡§ú‡§ø‡§§ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ‡§æ‡§§ ‡§ï‡•á‡§ï ‡§ï‡§æ‡§™‡•Ç‡§® ‡§Ü‡§®‡§Ç‡§¶ ‡§∏‡§æ‡§ú‡§∞‡§æ ‡§ï‡§∞‡§§‡§æ‡§®‡§æ ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•Ä ‡§µ ‡§™‡§æ‡§π‡•Å‡§£‡•á">
                        </figure>
                    </div>
                    <div class="col-6 col-md-4" data-aos="fade-up" data-aos-delay="400">
                        <figure class="gallery-item" tabindex="0" data-index="7">
                            <img src="images/dd8.jpg" class="gallery-img" loading="lazy"
                                alt="‡§∂‡•ç‡§∞‡§µ‡§£ ‡§™‡•ç‡§∞‡§∂‡§ø‡§ï‡•ç‡§∑‡§£‡§æ‡§∏‡§æ‡§†‡•Ä ‡§Ü‡§ß‡•Å‡§®‡§ø‡§ï ‡§∏‡§æ‡§ß‡§®‡§æ‡§Ç‡§ö‡§æ ‡§µ‡§æ‡§™‡§∞ ‡§ï‡§∞‡•Ç‡§® ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•ç‡§Ø‡§æ‡§Ç‡§®‡§æ ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§®">
                        </figure>
                    </div>
                    <div class="col-6 col-md-4" data-aos="fade-up" data-aos-delay="400">
                        <figure class="gallery-item" tabindex="0" data-index="8">
                            <img src="images/dd9.jpg" class="gallery-img" loading="lazy"
                                alt="‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•ç‡§Ø‡§æ‡§Ç‡§∏‡§æ‡§†‡•Ä ‡§∏‡•ç‡§µ‡§ö‡•ç‡§õ ‡§µ ‡§™‡•å‡§∑‡•ç‡§ü‡§ø‡§ï ‡§≠‡•ã‡§ú‡§®‡§æ‡§ö‡•Ä ‡§∂‡§ø‡§∏‡•ç‡§§‡§¨‡§¶‡•ç‡§ß ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ">
                        </figure>
                    </div>
                    <div class="col-6 col-md-4" data-aos="fade-up" data-aos-delay="400">
                        <figure class="gallery-item" tabindex="0" data-index="9">
                            <img src="images/dd10.jpg" class="gallery-img" loading="lazy"
                                alt="‡§∂‡§æ‡§≥‡•á‡§§ ‡§¨‡§æ‡§Ø‡•ã‡§Æ‡•á‡§ü‡•ç‡§∞‡§ø‡§ï ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä‡§¶‡•ç‡§µ‡§æ‡§∞‡•á ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•ç‡§Ø‡§æ‡§Ç‡§ö‡•Ä ‡§∂‡§ø‡§∏‡•ç‡§§‡§¨‡§¶‡•ç‡§ß ‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§‡•Ä ‡§®‡•ã‡§Ç‡§¶‡§µ‡§≤‡•Ä ‡§ú‡§æ‡§§ ‡§Ü‡§π‡•á">
                        </figure>
                    </div>
                    <div class="col-6 col-md-4" data-aos="fade-up" data-aos-delay="400">
                        <figure class="gallery-item" tabindex="0" data-index="10">
                            <img src="images/dd11.jpg" class="gallery-img" loading="lazy"
                                alt="‡§ú‡§ø‡§≤‡•ç‡§π‡§æ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§® ‡§∏‡§Æ‡§ø‡§§‡•Ä‡§ö‡•ç‡§Ø‡§æ ‡§≠‡•á‡§ü‡•Ä‡§¶‡§∞‡§Æ‡•ç‡§Ø‡§æ‡§® ‡§∂‡•ç‡§∞‡§µ‡§£ ‡§§‡§™‡§æ‡§∏‡§£‡•Ä ‡§â‡§™‡§ï‡§∞‡§£‡§æ‡§Ç‡§ö‡•Ä ‡§™‡§æ‡§π‡§£‡•Ä">
                        </figure>
                    </div>
                    <div class="col-6 col-md-4" data-aos="fade-up" data-aos-delay="400">
                        <figure class="gallery-item" tabindex="0" data-index="11">
                            <img src="images/dd12.jpg" class="gallery-img" loading="lazy"
                                alt="‡§∂‡§æ‡§≥‡•á‡§§ ‡§Ü‡§Ø‡•ã‡§ú‡§ø‡§§ ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ‡§æ‡§§ ‡§Æ‡§æ‡§®‡•ç‡§Ø‡§µ‡§∞ ‡§™‡§æ‡§π‡•Å‡§£‡•á ‡§µ ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•ç‡§Ø‡§æ‡§Ç‡§Æ‡§ß‡•Ä‡§≤ ‡§∏‡§Ç‡§µ‡§æ‡§¶">
                        </figure>
                    </div>
                    <div class="col-6 col-md-4" data-aos="fade-up" data-aos-delay="400">
                        <figure class="gallery-item" tabindex="0" data-index="12">
                            <img src="images/dd13.jpg" class="gallery-img" loading="lazy"
                                alt="‡§Æ‡•Å‡§ï‡§¨‡§ß‡§ø‡§∞ ‡§®‡§ø‡§µ‡§æ‡§∏‡•Ä ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§≤‡§Ø, ‡§Ö‡§ï‡•ã‡§≤‡§æ ‡§Ø‡•á‡§•‡•Ä‡§≤ ‡§∂‡§æ‡§≥‡§æ ‡§™‡§∞‡§ø‡§∏‡§∞">
                        </figure>
                    </div>
                    <div class="col-6 col-md-4" data-aos="fade-up" data-aos-delay="400">
                        <figure class="gallery-item" tabindex="0" data-index="13">
                            <img src="images/dd14.jpg" class="gallery-img" loading="lazy"
                                alt="‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•ç‡§Ø‡§æ‡§Ç‡§∏‡§æ‡§†‡•Ä ‡§∏‡•ç‡§µ‡§ö‡•ç‡§õ ‡§µ ‡§™‡•å‡§∑‡•ç‡§ü‡§ø‡§ï ‡§≠‡•ã‡§ú‡§®‡§æ‡§ö‡•Ä ‡§∂‡§ø‡§∏‡•ç‡§§‡§¨‡§¶‡•ç‡§ß ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ ‡§Ü‡§£‡§ø ‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§ ‡§Æ‡§æ‡§®‡•ç‡§Ø‡§µ‡§∞">
                        </figure>
                    </div>

                </div>

                <!-- LIGHTBOX -->
                <div id="lightbox" class="lightbox" aria-hidden="true" role="dialog" aria-modal="true">
                    <button class="lb-close" aria-label="Close">&times;</button>
                    <button class="lb-prev" aria-label="Previous">‚Äπ</button>
                    <div class="lb-content">
                        <img src="" alt="" id="lightbox-img">
                        <p class="lb-caption" id="lightbox-caption"></p>
                        <!-- Invisible touch zones to make mobile tapping easier -->
                        <div class="lb-touch-zone" aria-hidden="true">
                            <div class="lb-touch-left"></div>
                            <div class="lb-touch-right"></div>
                        </div>
                    </div>
                    <button class="lb-next" aria-label="Next">‚Ä∫</button>
                </div>
            </div>
        </section>

    </main>

    <footer class="text-center py-3">¬© 2026 ‡§Æ‡•Ç‡§ï‡§¨‡§ß‡§ø‡§∞ ‡§®‡§ø‡§µ‡§æ‡§∏‡•Ä ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§≤‡§Ø</footer>

    <!-- FLOATING WHATSAPP -->
    <a class="whatsapp-float" href="https://wa.me/918956422281?text=‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞,%20‡§Æ‡•Ä%20‡§Ü‡§™‡§≤‡•ç‡§Ø‡§æ%20‡§Æ‡•Ç‡§ï‡§¨‡§ß‡§ø‡§∞%20‡§®‡§ø‡§µ‡§æ‡§∏‡•Ä%20‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§≤‡§Ø‡§æ‡§¨‡§¶‡•ç‡§¶‡§≤%20‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü‡§µ‡§∞‡•Ç‡§®%20‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä%20‡§™‡§æ‡§π‡§ø‡§≤‡•Ä.%20‡§ï‡•É‡§™‡§Ø‡§æ%20‡§∂‡§æ‡§≥‡•á‡§¨‡§¶‡•ç‡§¶‡§≤%20‡§Ö‡§ß‡§ø‡§ï%20‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä%20‡§Ü‡§£‡§ø%20‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï%20‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡•á‡§¨‡§æ‡§¨‡§§%20‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§®%20‡§ï‡§∞‡§æ‡§µ‡•á.%20‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶.
" target="_blank">üí¨</a>

    <!-- same JS block -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
    <script>
        document.querySelectorAll('.navbar-nav .nav-link').forEach(link => {
            link.addEventListener('click', () => {
                const collapse = document.querySelector('.navbar-collapse');
                if (collapse.classList.contains('show')) new bootstrap.Collapse(collapse).hide();
            });
        });

        window.addEventListener('load', () => window.scrollTo(0, 0));

        const page = location.pathname.split("/").pop() || "index.html";
        document.querySelectorAll('.nav-link').forEach(link => {
            if (link.getAttribute("href") === page) link.classList.add("active");
        });

        let lastScroll = 0;
        const navbar = document.getElementById("mainNavbar");
        let scrollTicking = false;
        window.addEventListener("scroll", () => {
            if (!scrollTicking) {
                scrollTicking = true;
                requestAnimationFrame(() => {
                    const current = window.pageYOffset;
                    if (current > lastScroll && current > 100) navbar.classList.add("hide");
                    else navbar.classList.remove("hide");
                    lastScroll = current;
                    scrollTicking = false;
                });
            }
        }, { passive: true });

        AOS.init({ once: true });

        // Lightweight accessible lightbox for gallery (optimized)
        // set non-blocking decoding for images
        document.querySelectorAll('.gallery-img').forEach(img => {
            try { img.decoding = 'async'; img.setAttribute('fetchpriority', 'auto'); } catch (e) { }
        });

        (function () {
            const grid = document.querySelector('.gallery-grid');
            const lightbox = document.getElementById('lightbox');
            const lbImg = document.getElementById('lightbox-img');
            const lbCaption = document.getElementById('lightbox-caption');
            const btnClose = document.querySelector('.lb-close');
            const btnPrev = document.querySelector('.lb-prev');
            const btnNext = document.querySelector('.lb-next');
            if (!grid || !lightbox || !lbImg) return;
            let current = 0;
            let lastActive = null;

            function getItems() { return Array.from(document.querySelectorAll('.gallery-item')); }

            function showByIndex(index) {
                const items = getItems();
                if (!items.length) return;
                index = ((index % items.length) + items.length) % items.length;
                const item = items[index];
                if (!item) return;
                const img = item.querySelector('img');
                lbImg.src = img.src;
                lbImg.alt = img.alt || '';
                lbCaption.textContent = img.alt || '';
                lightbox.setAttribute('aria-hidden', 'false');
                current = index;
                lastActive = document.activeElement;
                btnClose && btnClose.focus();
            }

            function hide() {
                lightbox.setAttribute('aria-hidden', 'true');
                if (lastActive && typeof lastActive.focus === 'function') lastActive.focus();
            }

            function next() { showByIndex(current + 1); }
            function prev() { showByIndex(current - 1); }

            // Event delegation: single listener instead of per-item handlers
            grid.addEventListener('click', (e) => {
                const fig = e.target.closest('.gallery-item');
                if (!fig) return;
                e.preventDefault();
                const idx = getItems().indexOf(fig);
                if (idx >= 0) showByIndex(idx);
            });

            grid.addEventListener('keydown', (e) => {
                const fig = e.target.closest('.gallery-item');
                if (!fig) return;
                if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); const idx = getItems().indexOf(fig); if (idx >= 0) showByIndex(idx); }
            });

            btnClose && btnClose.addEventListener('click', hide);
            btnNext && btnNext.addEventListener('click', next);
            btnPrev && btnPrev.addEventListener('click', prev);
            lightbox.addEventListener('click', (e) => { if (e.target === lightbox) hide(); });

            document.addEventListener('keydown', (e) => {
                if (lightbox.getAttribute('aria-hidden') !== 'false') return;
                if (e.key === 'Escape') hide();
                if (e.key === 'ArrowRight') next();
                if (e.key === 'ArrowLeft') prev();
            });

            // Mobile / touch navigation: tap left/right halves to prev/next
            const touchLeft = document.querySelector('.lb-touch-left');
            const touchRight = document.querySelector('.lb-touch-right');
            if (touchLeft && touchRight) {
                touchLeft.addEventListener('click', (e) => { e.stopPropagation(); prev(); });
                touchRight.addEventListener('click', (e) => { e.stopPropagation(); next(); });
                lbImg.addEventListener('touchend', (e) => {
                    if (!e.changedTouches || !e.changedTouches[0]) return;
                    const rect = lbImg.getBoundingClientRect();
                    const x = e.changedTouches[0].clientX - rect.left;
                    const rel = x / rect.width;
                    if (rel < 0.4) prev();
                    else if (rel > 0.6) next();
                }, { passive: true });
                lbImg.addEventListener('click', (e) => {
                    const rect = lbImg.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const rel = x / rect.width;
                    if (rel < 0.4) prev();
                    else if (rel > 0.6) next();
                });
            }
        })();
        // Mobile / touch navigation: tap left/right halves to prev/next
        const touchLeft = document.querySelector('.lb-touch-left');
        const touchRight = document.querySelector('.lb-touch-right');
        if (touchLeft && touchRight) {
            touchLeft.addEventListener('click', (e) => { e.stopPropagation(); prev(); });
            touchRight.addEventListener('click', (e) => { e.stopPropagation(); next(); });
            // Also support touchend on the image itself for broader area
            lbImg.addEventListener('touchend', (e) => {
                if (!e.changedTouches || !e.changedTouches[0]) return;
                const rect = lbImg.getBoundingClientRect();
                const x = e.changedTouches[0].clientX - rect.left;
                const rel = x / rect.width;
                if (rel < 0.4) prev();
                else if (rel > 0.6) next();
            }, { passive: true });
            lbImg.addEventListener('click', (e) => {
                const rect = lbImg.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const rel = x / rect.width;
                if (rel < 0.4) prev();
                else if (rel > 0.6) next();
            });
        }
        ;

        // Group gallery images by aspect ratio (landscape / square / portrait)
        (function () {
            const grid = document.querySelector('.gallery-grid');
            if (!grid) return;
            const items = Array.from(grid.querySelectorAll('.col-6'));

            function aspectCategory(img) {
                const w = img.naturalWidth || img.width || 1;
                const h = img.naturalHeight || img.height || 1;
                const r = w / h;
                if (r > 1.15) return 'landscape';
                if (r < 0.85) return 'portrait';
                return 'square';
            }

            // Wait until images are loaded so natural sizes are available
            const imgPromises = items.map(it => new Promise(res => {
                const img = it.querySelector('img');
                if (!img) return res();
                if (img.complete && img.naturalWidth) return res();
                img.addEventListener('load', () => res());
                img.addEventListener('error', () => res());
            }));

            Promise.all(imgPromises).then(() => {
                const buckets = { landscape: [], square: [], portrait: [] };
                items.forEach(it => {
                    const img = it.querySelector('img');
                    const cat = img ? aspectCategory(img) : 'square';
                    buckets[cat].push(it);
                });

                // Re-append in grouped order: landscape, square, portrait
                const order = ['landscape', 'square', 'portrait'];
                order.forEach(k => {
                    buckets[k].forEach(el => grid.appendChild(el));
                });
            });
        })();
    </script>
</body>

</html>